<html>
    <body>
        <noscript>
            This page needs JS to query the raw log contents.
        </noscript>
    </body>
    <script>
        async function getAndShow() {
            let url = window.location.hash.slice(1);
            if (url == "") {
                document.body.innerText = "Expected URL to have hash followed by log URL; empty log URL";
                return;
            }
            let log = await fetch(url);
            log = await log.text();

            // replacement regex from https://stackoverflow.com/a/29497680
            document.body.innerText = log
                .replace(/[\u001b\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-ORZcf-nqry=><]/g, "");
        }

        getAndShow();
    </script>
</html>
